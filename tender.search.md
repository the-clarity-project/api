# API для Clarity Project

[Опис API](README.md)

### Інформація про закупівлі Prozorro

## tender.ids

Метод дозволяє перетворювати між собою `hash` та `UA-...` ідентифікатори закупівель.

##### Приклад запиту:
https://com.clarityapp.pro/api/tender.ids?ids=UA-2018-07-23-000245-b,30552368575d47e689ed2cdcb1cedb8f&key=xxx

У параметрі ``ids`` передаються ідентифікатори (`UA-...` або hash) через кому, до 100 за один запит.

##### Приклад відповіді:
```json
{
  "list": [
    {
      "id": "bd97249f16d94bf6938a2fc6cb4a8ff7",
      "tender": "UA-2018-07-23-000245-b"
    },
    {
      "id": "30552368575d47e689ed2cdcb1cedb8f",
      "tender": "UA-2016-07-27-000340-b"
    },
    // ...
  ]
}
```

## tender.search

Метод дозволяю шукати закупівлі за обраними критеріями.

##### Приклад запиту:
https://com.clarityapp.pro/api/tender.search?key=xxx

### Пошукові критерії

Пошукові критерії передаються як get-параметри запиту, і відповідають параметрам при пошуку [через веб-інтерфейс](https://clarity-project.info/tenders).  

* **tender_id** - ідентифікатори закупівель (до 100 за запит);
* **status** - стан закупівлі: 
    * **active** - в процессі;
    * **complete** - успішні;
    * **cancelled** - відмінені;
    * **unsuccessful** - не відбулися;
* **entity** - ЄДРПОУ замовника;
* **entity_type** - тип замовника:
    * **defense** - Замовник, що здійснює закупівлі для потреб оборони,
    * **general** - Юридична особа, яка забезпечує потреби держави або територіальної громади,
    * **other** - Державне або комунальне підприємство, яке не належить до замовників,
    * **special** - Юридична особа, яка здійснює діяльність в одній або декількох окремих сферах господарювання,
    * **central** - Юридична особа, що здійснює закупівлі в інтересах замовників (ЦЗО),
    * **authority** - Орган державної влади, місцевого самоврядування або правоохоронний орган,
    * **social** - Орган соціального страхування.
* **tenderer** - ЄДРПОУ учасника закупівлі;
    * можна вказувати декілька кодів через `+` (закупівлі, де були ці учасники були разом) або `,` (закупівлі, де був
      хоча б один з учасників);
* **tenderer_status** - статус учасника:
    * **tenderer** - учасник;
    * **disqualified** - дискваліфікація;
    * **supplier** - переможець;
    * **contractor** - підписано договір;
    * *наприклад*, `tenderer=ххх&tenderer_status=contractor` обере лише закупівлі, де з цим 
    учасником було підписано контракт;
* **contract_status** - статус контракту, підписаного в результаті закупівлі:
    * **pending** - запропоновано;
    * **active** - підписано;
    * **cancelled** - скасовано;
    * **done** - завершено успішно;
    * **failed_no_paid** - розівано (з виплатами);
    * **failed_paid** - розівано (без виплат);
* **contract_term_reason** - причина розірвання договору;
* **disq_reason** - причина дискваліфікації учасника;
* **value_min**, **value_max** - очікувана вартість;
* **currency** - валюта;
* **nonprice** - наявність нецінових критеріїв:
    * **0** - без нецінових критеріїв;
    * **1** - закупівлі з неціновими критеріями.
* **fin_source** - джерело фінансування:
    * **state** - Державний бюджет України;
    * **crimea** - Бюджет Автономної Республіки Крим;
    * **fund** - Бюджет цільових фондів;
    * **loan** - Кредити та позики міжнародних валютно-кредитних організацій;
    * **local** - Місцевий бюджет;
    * **own** - Власний бюджет (кошти від господарської діяльності підприємства);
    * **donor** - Кошти донора;
    * **other** - Інше;
* **modified_from**, **modified_to** - дата зміни інформації про закупівлю, у форматі `дд-мм-рррр`;
* **created_from**, **created_to** - дата створення закупівлі;
* **classification** - CPV-код предмету закупівлі;
* **cpv_class** - класифікація предмету закупівлі:
    * **works** - роботи;
    * **services** - рослуги;
    * **goods** - товари;
* **payment_type** - тип оплати:
    * **prepayment** - передоплата;
    * **postpayment** - післяплата;
* **payment_after** - оплата після:
    * **executionOfWorks** - виконання робіт;
    * **deliveryOfGoods** - поставки товару;
    * **submittingServices** - надання послуг;
    * **signingTheContract** - підписання договору;
    * **dateOfInvoicing** - дати виставлення рахунку;
    * **endDateOfTheReportingPeriod** - дати закінчення звітного періоду;
    * **anotherEvent** - іншої події;
* **region** - код регіону замовника;
* **method** - метод закупівлі: відкрита (**open**) або звітування (**limited**);
* **type** - процедура закупівлі:
    * **aboveThresholdUA** - Відкриті торги;
    * **aboveThresholdEU** - Відкриті торги (EU);
    * **belowThreshold** - Допорогова закупівля;
    * **negotiation** - Переговорна процедура;
    * **negotiation.quick** - Переговорна процедура (за нагальною потребою);
    * **reporting** - Звіт про договір;
    * **esco** - Закупівля енергосервісу;
    * **competitiveDialogue** - Конкурентний діалог;
    * **competitiveDialogueUA** - Конкурентний діалог (UA);
    * **competitiveDialogueEU** - Конкурентний діалог (EU);
    * **priceQuotation** - Запит ціни пропозицій;
    * **competitiveDialogue.stage2** - Конкурентний діалог, 2 етап;
    * **competitiveDialogueEU.stage2** - Конкурентний діалог (EU), 2 етап;
    * **competitiveDialogueUA.stage2** - Конкурентний діалог (UA), 2 етап;
    * **aboveThresholdUA.defense** - Закупівля для потреб оборони;
    * **closeFrameworkAgreementUA** - Укладання рамкової угоди';
    * **closeFrameworkAgreementSelectionUA** - Відбір для закупівлі за рамковою угодою';
* **method_rationale** - причина обрання процедури:
    * **COVID-19** - COVID-19;
    * **catalogue** - Е-каталог;
    * **negotiation.artContestIP** - Інтелектуальна власність;
    * **negotiation.noCompetition** - Відсутність конкуренції на ринку;
    * **negotiation.twiceUnsuccessful** - Двічі не відбулись торги;
    * **negotiation.additionalPurchase** - Додаткову закупівля в того самого постачальника;
    * **negotiation.additionalConstruction** - Нобхідність проведення додаткових будівельних робіт;
    * **negotiation.stateLegalServices** - Закупівля юридичних послуг;
    * **negotiation.quick** - Нагальна потреба;
* **complaints** - наявність скарг до закупівлі:
    * **0** - всі закупівлі;
    * **1** - зі скаргами;
* **complaint_from** - ЄДРПОУ скаржника;

### Додаткові поля

За замовчуванням метод повертає лише базову інформацію про закупівлі. 
Для отримання детальної інформації необхідно передати get-параметр `more_fields` з обраними розділами.

Станом на зараз, кількість додаткових розділів не обмежується.
*Можливо*, це зміниться в майбутньому. 

**Приклад запиту:**
https://com.clarityapp.pro/api/tender.search?more_fields=edrs,contracts&key=xxx

**Опис можливих параметрів:**
* **edrs** - інформація про учасників і замовника;
* **lots** - інформація про лоти закупівлі;
* **items** - предмети закупівлі;
* **bids** - пропозиції;
* **cancellations** - інформація про скасування закупівлі або її лотів;
* **awards** - визначення переможця;
* **contracts** - договір;
* **qualifications** - прекваліфікації;
* **disqualifications** - дискваліфікації;
* **docs** - документи закупівлі;

**Приклад відповіді:**

[examples/tender.search.json](examples/tender.search.json)